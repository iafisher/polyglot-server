alice >>> register alice pwd
success
iafisher >>> register iafisher 123456
success
bob >>> register bob ajhnb375gjnajvna
success

# Inboxes should be empty.
alice >>> recv
error inbox is empty
iafisher >>> recv
error inbox is empty
bob >>> recv
error inbox is empty

# One direct message
alice >>> send bob Hello!
success
# Everyone else's inboxes should still be empty.
alice >>> recv
error inbox is empty
iafisher >>> recv
error inbox is empty
bob >>> recv
message <timestamp> alice bob Hello!
bob >>> recv
error inbox is empty

# A broadcast message
iafisher >>> send * What's up guys?
success
alice >>> recv
message <timestamp> iafisher * What's up guys?
bob >>> recv
message <timestamp> iafisher * What's up guys?
iafisher >>> recv
message <timestamp> iafisher * What's up guys?
alice >>> recv
error inbox is empty
iafisher >>> recv
error inbox is empty
bob >>> recv
error inbox is empty

# Multiple messages
iafisher >>> send alice Hi Alice!
success
iafisher >>> send alice Are you there?
success
iafisher >>> send * Logging off now
success
# Make sure the order of retrieval is first-sent, first-received.
alice >>> recv
b"message <timestamp> iafisher alice Hi Alice!\r\nmessage <timestamp> iafisher alice Are you there?\r\nmessage <timestamp> iafisher * Logging off now\r\n"
alice >>> recv
error inbox is empty

# Clear the last broadcast message.
iafisher >>> recv
message <timestamp> iafisher * Logging off now
bob >>> recv
message <timestamp> iafisher * Logging off now

# Whitespace is significant.
alice >>> send bob    leading whitespace
success
bob >>> recv
message <timestamp> alice bob    leading whitespace

# Some error cases
>>> send alice Hello!
error must be logged in
alice >>> send charlie This shouldn't work.
error recipient does not exist
alice >>> send bob this message is too long: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
error message too long
alice >>> send bob this message is not too long: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
success
bob >>> recv
message <timestamp> alice bob this message is not too long: aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa
